import{r as g,S as o,j as e,Q as w}from"./app-CPDKVT9Z.js";import{A as b}from"./AuthenticatedLayout-D2IqHuTU.js";import{I as l}from"./InputLabel-CMNSXyED.js";import{T as y}from"./TextInput-C97rrFg7.js";import{S as N}from"./SecondaryButton-DkNQ1O9a.js";import{d as S}from"./debounce-CK132_0x.js";import"./transition-B1brDaxg.js";function D({auth:j,alerts:i,filters:v,filterOptions:d,summary:n}){const[_,c]=g.useState(!1),[t,x]=g.useState(v),m=S(s=>{c(!0),o.get(route("reports.history"),s,{preserveState:!0,preserveScroll:!0,onFinish:()=>c(!1)})},300),a=(s,r)=>{const h={...t,[s]:r};x(h),m(h)},f=()=>{const s={start_date:"",end_date:"",type:"",severity:"",status:"",location:"",per_page:25};x(s),m(s)},p=s=>{switch(s){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"acknowledged":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(b,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Historical Reports"}),children:[e.jsx(w,{title:"Historical Reports"}),e.jsx("div",{className:"py-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-0",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("div",{className:"text-gray-900 text-lg font-semibold mb-2",children:"Total Alerts"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n.total_alerts})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("div",{className:"text-gray-900 text-lg font-semibold mb-2",children:"By Severity"}),e.jsx("div",{className:"space-y-2",children:Object.entries(n.by_severity).map(([s,r])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p(s)}`,children:s.toUpperCase()}),e.jsx("span",{className:"font-medium",children:r})]},s))})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("div",{className:"text-gray-900 text-lg font-semibold mb-2",children:"By Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(n.by_status).map(([s,r])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u(s)}`,children:s.toUpperCase()}),e.jsx("span",{className:"font-medium",children:r})]},s))})]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"start_date",value:"Start Date"}),e.jsx(y,{id:"start_date",type:"date",value:t.start_date,onChange:s=>a("start_date",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"end_date",value:"End Date"}),e.jsx(y,{id:"end_date",type:"date",value:t.end_date,onChange:s=>a("end_date",s.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"type",value:"Alert Type"}),e.jsxs("select",{id:"type",value:t.type,onChange:s=>a("type",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Types"}),d.types.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"severity",value:"Severity"}),e.jsxs("select",{id:"severity",value:t.severity,onChange:s=>a("severity",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Severities"}),d.severities.map(s=>e.jsx("option",{value:s,children:s.toUpperCase()},s))]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",value:t.status,onChange:s=>a("status",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),d.statuses.map(s=>e.jsx("option",{value:s,children:s.toUpperCase()},s))]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"location",value:"Location"}),e.jsxs("select",{id:"location",value:t.location,onChange:s=>a("location",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All Locations"}),d.locations.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Show"}),e.jsxs("select",{value:t.per_page,onChange:s=>a("per_page",s.target.value),className:"border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"entries"})]}),e.jsx(N,{onClick:f,children:"Reset Filters"})]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Severity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sensor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>o.visit(route("alerts.show",s.id)),children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{children:new Date(s.created_at).toLocaleString("en-MY",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsx("div",{className:"text-xs text-gray-500",children:s.created_at_diff})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p(s.severity)}`,children:s.severity.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u(s.status)}`,children:s.status.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.sensor.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.sensor.location}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-md break-words",children:s.description})]},s.id))})]})}),i.links.length>3&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",i.from," to ",i.to," of ",i.total," results"]}),e.jsx("div",{className:"flex space-x-2",children:i.links.map((s,r)=>s.url===null?null:e.jsx("button",{className:`px-3 py-1 rounded text-sm font-medium ${s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,onClick:()=>o.visit(s.url,{preserveScroll:!0,preserveState:!0}),dangerouslySetInnerHTML:{__html:s.label}},r))})]})})]})]})})]})}export{D as default};
