import{J as N,j as e,t as f,r as l}from"./app-cwKvjecJ.js";import{z as T}from"./transition-PBUkRdM8.js";import{M as B}from"./Modal-CLfweMmt.js";import{P as S}from"./PrimaryButton-LaDYYdJ4.js";function y({active:r=!1,className:a="",children:t,icon:s,href:n,...c}){const{url:o}=N(),d=r||(()=>{const x=o.endsWith("/")?o.slice(0,-1):o,h=typeof n=="string"&&n.startsWith("/")&&n.endsWith("/")?n.slice(0,-1):n;return typeof n=="string"&&n.startsWith("/")?x===h:route().current(n)})();return e.jsxs(f,{href:typeof n=="string"&&n.startsWith("/")?n:route(n),...c,className:"group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 "+(d?"bg-gray-700 text-white border-r-4 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-700/50")+" "+a,children:[s&&e.jsx("span",{className:`mr-3 flex-shrink-0 ${d?"text-blue-400":"text-gray-400 group-hover:text-gray-300"}`,children:s}),t]})}const v=l.createContext(),u=({children:r})=>{const[a,t]=l.useState(!1),s=()=>{t(n=>!n)};return e.jsx(v.Provider,{value:{open:a,setOpen:t,toggleOpen:s},children:e.jsx("div",{className:"relative",children:r})})},W=({children:r})=>{const{open:a,setOpen:t,toggleOpen:s}=l.useContext(v);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:s,children:r}),a&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)})]})},E=({align:r="right",width:a="48",contentClasses:t="py-1 bg-white",children:s})=>{const{open:n,setOpen:c}=l.useContext(v);let o="origin-top";r==="left"?o="ltr:origin-top-left rtl:origin-top-right start-0":r==="right"&&(o="ltr:origin-top-right rtl:origin-top-left end-0");let d="";return a==="48"&&(d="w-48"),e.jsx(e.Fragment,{children:e.jsx(T,{show:n,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${o} ${d}`,onClick:()=>c(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 "+t,children:s})})})})},H=({className:r="",children:a,...t})=>e.jsx(f,{...t,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none "+r,children:a});u.Trigger=W;u.Content=E;u.Link=H;function V({message:r,type:a="success",duration:t=5e3,onClose:s}){const[n,c]=l.useState(!0),[o,d]=l.useState(!1),x=l.useCallback(()=>{d(!0),setTimeout(()=>{c(!1),s&&s()},300)},[s]);if(l.useEffect(()=>{if(!r)return;c(!0),d(!1);const p=setTimeout(()=>{x()},t);return()=>{clearTimeout(p)}},[r,t,x]),!r||!n)return null;const m=(()=>{switch(a){case"success":return{bg:"bg-green-50",border:"border-green-400",text:"text-green-800",icon:e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})};case"error":return{bg:"bg-red-50",border:"border-red-400",text:"text-red-800",icon:e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})};case"warning":return{bg:"bg-yellow-50",border:"border-yellow-400",text:"text-yellow-800",icon:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})};case"info":return{bg:"bg-blue-50",border:"border-blue-400",text:"text-blue-800",icon:e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})};default:return{bg:"bg-gray-50",border:"border-gray-400",text:"text-gray-800",icon:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}}})();return e.jsx("div",{className:`fixed bottom-5 right-5 z-50 transform transition-all duration-300 ease-in-out ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}`,children:e.jsx("div",{className:`${m.bg} border-l-4 ${m.border} p-4 rounded shadow-lg max-w-md`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:m.icon}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:`text-sm ${m.text}`,children:r})}),e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("div",{className:"-mx-1.5 -my-1.5",children:e.jsxs("button",{onClick:x,className:`inline-flex rounded-md p-1.5 ${m.text} hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-gray-600`,children:[e.jsx("span",{className:"sr-only",children:"Dismiss"}),e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})})})}function $({title:r,titleId:a,...t},s){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?l.createElement("title",{id:a},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const O=l.forwardRef($);function I({show:r,onClose:a,alert:t}){var d;const[s,n]=l.useState(10),[c,o]=l.useState(!1);return l.useEffect(()=>{let x;return r&&s>0&&(x=setInterval(()=>{n(h=>h<=1?(o(!0),clearInterval(x),0):h-1)},1e3)),()=>{x&&clearInterval(x)}},[r]),l.useEffect(()=>{r&&(n(10),o(!1))},[r]),e.jsx(B,{show:r,onClose:()=>{},maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"bg-red-100 rounded-full p-3",children:e.jsx(O,{className:"h-12 w-12 text-red-600"})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"CRITICAL ALERT"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 mb-4",children:((d=t==null?void 0:t.sensor)==null?void 0:d.location)||"Unknown Location"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-gray-700",children:(t==null?void 0:t.description)||"No description available"})}),(t==null?void 0:t.ai_suggestion)&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Recommended Action:"}),e.jsx("p",{className:"text-gray-600",children:t.ai_suggestion})]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[!c&&e.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:["Please review this alert carefully. You can acknowledge it in ",s," seconds."]}),e.jsx(S,{onClick:a,disabled:!c,className:`w-full justify-center ${c?"":"opacity-50 cursor-not-allowed"}`,children:c?"Acknowledge Alert":`Wait ${s}s`})]})]})})}function U({header:r,children:a}){const{auth:t,flash:s}=N().props,n=t.user,[c,o]=l.useState(!1),[d,x]=l.useState(null),[h,m]=l.useState("success"),[p,k]=l.useState(0),[L,j]=l.useState(null),[C,b]=l.useState(!1);l.useEffect(()=>{const i=(g,A)=>{x(g),m(A),k(R=>R+1)};if(s.alert){const g=s.alert;g.severity==="critical"?(j(g),b(!0)):i(g.description,g.severity);return}s!=null&&s.success?i(s.success,"success"):s!=null&&s.error?i(s.error,"error"):s!=null&&s.warning?i(s.warning,"warning"):s!=null&&s.info&&i(s.info,"info")},[s]);const M=l.useCallback(()=>{x(null)},[]),z=l.useCallback(()=>{b(!1),j(null)},[]),w=[{name:"Dashboard",href:"dashboard",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"})]})},{name:"Robot Camera View",href:"robot.camera",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})},{name:"Sensor Health",href:"sensor-health.index",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{name:"Historical Reports",href:"reports.history",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{name:"AI Assistant",href:"ai-assistant",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}];return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsx(I,{show:C,onClose:z,alert:L}),d&&e.jsx(V,{message:d,type:h,onClose:M,duration:5e3},p),e.jsx("div",{className:`fixed inset-0 z-40 bg-gray-600 bg-opacity-75 transition-opacity lg:hidden ${c?"opacity-100":"opacity-0 pointer-events-none"}`,children:e.jsx("div",{className:"fixed inset-0 z-40 flex",children:e.jsxs("div",{className:`relative flex w-full max-w-xs flex-1 flex-col bg-gray-800 pt-5 pb-4 transition duration-300 ease-in-out ${c?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:e.jsxs("button",{type:"button",className:"ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>o(!1),children:[e.jsx("span",{className:"sr-only",children:"Close sidebar"}),e.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),e.jsx("div",{className:"flex flex-shrink-0 items-center px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-blue-600",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsx("span",{className:"ml-3 text-xl font-bold text-white",children:"SAFE"})]})}),e.jsx("div",{className:"mt-5 h-0 flex-1 overflow-y-auto",children:e.jsx("nav",{className:"space-y-1 px-2",children:w.map(i=>e.jsx(y,{href:i.href,icon:i.icon,children:i.name},i.name))})}),e.jsx("div",{className:"px-2 pb-4",children:e.jsxs(f,{href:route("logout"),method:"post",as:"button",className:"group flex w-full items-center px-4 py-3 text-sm font-medium text-gray-300 hover:bg-gray-700/50 hover:text-white rounded-lg transition-all duration-200",children:[e.jsx("svg",{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})})]})})}),e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col bg-gray-800",children:[e.jsx("div",{className:"flex h-16 flex-shrink-0 items-center px-4 bg-gray-900",children:e.jsx("div",{className:"flex items-center",children:e.jsxs(f,{href:"/",className:"flex items-center",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-white",children:e.jsx("img",{src:"/storage/logo.png",alt:"SAFE Logo",className:"h-8 w-8"})}),e.jsx("span",{className:"ml-3 text-xl font-bold text-white",children:"SAFE"})]})})}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-y-auto",children:[e.jsx("nav",{className:"flex-1 space-y-1 px-2 py-4",children:w.map(i=>e.jsx(y,{href:i.href,icon:i.icon,children:i.name},i.name))}),e.jsx("div",{className:"px-2 pb-4",children:e.jsxs(f,{href:route("logout"),method:"post",as:"button",className:"group flex w-full items-center px-4 py-3 text-sm font-medium text-gray-300 hover:bg-gray-700/50 hover:text-white rounded-lg transition-all duration-200",children:[e.jsx("svg",{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})})]})]})}),e.jsxs("div",{className:"flex flex-1 flex-col lg:pl-64",children:[e.jsxs("div",{className:"flex h-16 flex-shrink-0 bg-gray-800 shadow-sm",children:[e.jsxs("button",{type:"button",className:"border-r border-gray-700 px-4 text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 lg:hidden",onClick:()=>o(!0),children:[e.jsx("span",{className:"sr-only",children:"Open sidebar"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})]}),e.jsxs("div",{className:"flex flex-1 justify-between px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-2 w-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-300",children:"System Online"})]})})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"relative",children:e.jsxs(u,{children:[e.jsx(u.Trigger,{children:e.jsx("span",{className:"inline-flex rounded-md",children:e.jsxs("button",{type:"button",className:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-3 py-2 text-sm font-medium leading-4 text-gray-300 transition duration-150 ease-in-out hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-sm font-medium text-white",children:n.name.charAt(0).toUpperCase()})}),e.jsx("span",{children:n.name})]}),e.jsx("svg",{className:"-me-0.5 ms-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),e.jsxs(u.Content,{children:[e.jsx(u.Link,{href:route("profile.edit"),children:"Profile"}),e.jsx(u.Link,{href:route("logout"),method:"post",as:"button",children:"Log Out"})]})]})})})]})]}),r&&e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:r})}),e.jsx("main",{className:"flex-1 bg-gray-50 p-4 sm:p-6 lg:p-8",children:a})]})]})}export{U as A,V as T};
