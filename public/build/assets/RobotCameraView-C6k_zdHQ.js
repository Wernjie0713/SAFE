import{r as a,x as T,j as e,Q as S}from"./app-cwKvjecJ.js";import{A as L,T as P}from"./AuthenticatedLayout-gkY4RZHY.js";import{P as F}from"./PrimaryButton-LaDYYdJ4.js";import"./transition-PBUkRdM8.js";import"./Modal-CLfweMmt.js";function z({auth:u,flash:I,alerts:i}){const[V,U]=a.useState(!1),[b,o]=a.useState(!1),[x,c]=a.useState(""),[h,d]=a.useState("success"),[r,y]=a.useState("robot1"),[j,f]=a.useState(0),{data:l,setData:m,post:v,processing:p,reset:k,errors:A}=T({image:null,mediaType:"image"}),N=()=>{fetch(r==="robot1"?"/storage/rusting-pipe.mp4":"/storage/sample-hazard.jpg").then(s=>s.blob()).then(s=>{const g=r==="robot1"?"video/mp4":"image/jpeg",n=r==="robot1"?"robot-inspection.mp4":"robot-inspection.jpg",R=new File([s],n,{type:g});m(C=>({...C,image:R,mediaType:r==="robot1"?"video":"image"})),v("/api/robot/inspect",{onSuccess:()=>{d("success"),c("Inspection completed successfully"),o(!0),setTimeout(()=>o(!1),3e3)},onError:()=>{d("error"),c("Failed to process inspection"),o(!0),setTimeout(()=>o(!1),3e3)}})}).catch(s=>{console.error("Error loading media:",s),d("error"),c("Failed to load media file"),o(!0),setTimeout(()=>o(!1),3e3)})},w=t=>{y(t.target.value),m(s=>({...s,image:null,mediaType:"image"})),f(s=>s+1)};return e.jsxs(L,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Robot Camera View"}),children:[e.jsx(S,{title:"Robot Camera View"}),e.jsx("div",{className:"py-0",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-0",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 h-[500px] flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"robot-camera",className:"block text-sm font-semibold text-gray-800 mb-1",children:"Select Robot/Camera:"}),e.jsxs("select",{id:"robot-camera",value:r,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",onChange:w,children:[e.jsx("option",{value:"robot1",children:"Robot 1 - Front Camera"}),e.jsx("option",{value:"robot2",children:"Robot 2 - Side Camera"}),e.jsx("option",{value:"robot3",children:"Robot 3 - Rear Camera"})]})]}),l.image?e.jsx("div",{className:"relative w-full h-[300px] bg-black rounded-lg overflow-hidden",children:l.mediaType==="video"?e.jsx("video",{src:URL.createObjectURL(l.image),className:"absolute inset-0 w-full h-full object-contain pointer-events-none",autoPlay:!0,loop:!0,muted:!0,playsInline:!0},j):e.jsx("img",{src:URL.createObjectURL(l.image),alt:"Robot camera feed",className:"absolute inset-0 w-full h-full object-contain"})}):e.jsx("div",{className:"w-full h-[300px] bg-black rounded-md flex items-center justify-center border border-dashed border-gray-500",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"ðŸ“· Live Video Feed Placeholder"})}),e.jsx("div",{className:"mt-4",children:e.jsx(F,{onClick:N,disabled:p,children:p?"Processing...":"Simulate Robot Inspection"})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 h-[500px] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Visual Inspection Alerts"}),e.jsx("div",{className:"space-y-4",children:i&&i.length>0?i.map((t,s)=>{const n={critical:"bg-red-100 border-red-300 text-red-900",high:"bg-orange-100 border-orange-300 text-orange-900",medium:"bg-yellow-100 border-yellow-300 text-yellow-900",low:"bg-blue-100 border-blue-300 text-blue-900"}[t.severity.toLowerCase()]||"bg-gray-100 border-gray-300";return e.jsxs("div",{className:`p-3 border rounded-md ${n}`,children:[e.jsx("p",{className:"font-semibold",children:t.type}),e.jsx("p",{className:"mt-1",children:t.description}),e.jsxs("p",{className:"text-sm mt-2 font-medium",children:["Severity: ",t.severity.charAt(0).toUpperCase()+t.severity.slice(1)]})]},s)}):e.jsx("p",{className:"text-sm text-gray-600",children:"No alerts to display."})})]})})]})})})}),b&&e.jsx(P,{message:x,type:h,onClose:()=>o(!1)})]})}export{z as default};
